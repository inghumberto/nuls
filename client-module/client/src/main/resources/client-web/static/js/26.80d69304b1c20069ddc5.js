webpackJsonp([26],{DStv:function(e,s){},SjFi:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={data:function(){return{tableData:[],dialogFormVisible:!1,totalAll:0,userListForm:{userAddress:"",userAlias:"",userHelp:""},userListFormRules:{userAddress:[{required:!0,message:this.$t("message.c116"),trigger:"blur"},{min:10,max:35,message:this.$t("message.c117"),trigger:"blur"}]}}},components:{Back:t("LPk9").a},mounted:function(){var e=this;this.openDB(),this.getUserList(1,15);var s=!1;setInterval(function(){s=e.dialogFormVisible},500),document.onkeydown=function(e){13===window.event.keyCode&&s&&document.getElementById("userList").click()}},methods:{openDB:function(){!function(e){window.indexedDB||window.alert("sorry IndexDB");var s=indexedDB.open(e.db_name,e.db_version);s.onerror=function(e){alert("err: "+e)},s.onupgradeneeded=function(s){this.db=s.target.result,this.db.objectStoreNames.contains(e.db_store_name)||this.db.createObjectStore(e.db_store_name)},s.onsuccess=function(e){this.db=e.target.result}}({db_name:"usersDB",db_version:"1",db_store_name:"addressList"})},addUserAccount:function(e){var s=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;!function(e,s,t){var r=indexedDB.open(e.db_name,e.db_version);r.onsuccess=function(r){r.target.result.transaction(e.db_store_name,"readwrite").objectStore(e.db_store_name).put(s,t)},r.onerror=function(e){console.log("errï¼š"+e)}}({db_name:"usersDB",db_version:"1",db_store_name:"addressList"},{userAddress:s.userListForm.userAddress,userHelp:s.userListForm.userHelp},s.userListForm.userAddress),s.getUserList(1,15),s.userListForm.userAddress="",s.userListForm.userHelp="",s.dialogFormVisible=!1})},getUserList:function(e,s){var t=this,r=[],o="usersDB",i="1",n="addressList";indexedDB.open(o,i).onsuccess=function(e){e.target.result.transaction(n,"readonly").objectStore(n).openCursor().onsuccess=function(e){var s=e.target.result;s&&(r.push(s.value),s.continue())}},setTimeout(function(){t.totalAll=r.length,t.tableData=1===e?r.slice(0,s):r.slice(15*(e-1),15*e)},50)},consensusSize:function(e){this.getUserList(e,15)},toNewAccount:function(){this.dialogFormVisible=!0,this.userListForm.userAddress="",this.userListForm.userAlias="",this.userListForm.userHelp=""},editorRow:function(e,s,t){this.dialogFormVisible=!0,this.userListForm.userAddress=e,this.userListForm.userAlias=s,this.userListForm.userHelp=t},deleteRow:function(e){var s=this;this.$confirm(this.$t("message.c115"),this.$t("message.c86"),{confirmButtonText:this.$t("message.confirmButtonText"),cancelButtonText:this.$t("message.cancelButtonText")}).then(function(){indexedDB.open("usersDB",1).onsuccess=function(s){s.target.result.transaction(["addressList"],"readwrite").objectStore("addressList").delete(e)},s.getUserList(1,15),s.$message({type:"success",message:s.$t("message.passWordSuccess")})}).catch(function(){})},userListClose:function(){this.$refs.userListForm.resetFields()}}},o={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"users"},[t("Back",{attrs:{backTitle:this.$t("message.setManagement")}}),e._v(" "),t("div",{staticClass:"users-conter"},[t("h2",[e._v(e._s(e.$t("message.c93")))]),e._v(" "),t("el-button",{staticClass:"newAccount",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(s){e.toNewAccount()}}}),e._v(" "),t("el-table",{attrs:{data:e.tableData}},[t("el-table-column",{attrs:{prop:"userAddress",label:e.$t("message.c69"),"min-width":"288",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"userHelp",label:e.$t("message.remarks"),width:"180",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:e.$t("message.operation"),width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.editorRow(s.row.userAddress,s.row.userAlias,s.row.userHelp)}}},[e._v("\n            "+e._s(e.$t("message.c94"))+"\n          ")]),e._v(" "),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.deleteRow(s.row.userAddress)}}},[e._v("\n            "+e._s(e.$t("message.c95"))+"\n          ")])]}}])})],1),e._v(" "),t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.totalAllOk=this.totalAll>15,expression:"totalAllOk = this.totalAll>15 ?true:false"}],staticClass:"cb",attrs:{layout:"prev, pager, next","page-size":15,total:this.totalAll},on:{"current-change":e.consensusSize}})],1),e._v(" "),t("el-dialog",{attrs:{title:e.$t("message.c96"),visible:e.dialogFormVisible,top:"24vh"},on:{"update:visible":function(s){e.dialogFormVisible=s},close:e.userListClose}},[t("el-form",{ref:"userListForm",attrs:{model:e.userListForm,rules:e.userListFormRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:e.$t("message.c69"),prop:"userAddress"}},[t("el-input",{attrs:{maxlength:35},model:{value:e.userListForm.userAddress,callback:function(s){e.$set(e.userListForm,"userAddress","string"==typeof s?s.trim():s)},expression:"userListForm.userAddress"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("message.remarks")}},[t("el-input",{attrs:{maxlength:20},model:{value:e.userListForm.userHelp,callback:function(s){e.$set(e.userListForm,"userHelp","string"==typeof s?s.trim():s)},expression:"userListForm.userHelp"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",id:"userList"},on:{click:function(s){e.addUserAccount("userListForm")}}},[e._v("\n        "+e._s(e.$t("message.confirmButtonText"))+"\n      ")])],1)],1)],1)},staticRenderFns:[]};var i=t("vSla")(r,o,!1,function(e){t("DStv")},null,null);s.default=i.exports}});